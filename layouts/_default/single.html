{{ partial "header.html" . }}
<title>{{ .Title }} - {{ .Site.Title }}</title>
</head>

<body>

<div class="blob-container">
  <div class="circle circle-article-1 fade-in"></div>
  <div class="circle circle-article-2 fade-in"></div>
</div>

<header class="logo">
  <div>
    <span class="home-link"><a href="{{ .Site.BaseURL }}">Ed Duarte</a></span>
    {{ partial "theme-link.html" }}
  </div>
</header>

<main class="main-container article-container">
  <article>
    <header>
      <div class="title">{{ .Title }}</div>
      {{ $subtitle := .Params.subtitle }}
      {{ if $subtitle }}
      <div class="subtitle">{{ $subtitle }}</div>
      {{ end }}

      {{ $authorList := .Params.authors }}
      {{ if $authorList }}
      <div class="header-meta">
        <p>
          {{ $len := (len $authorList) }}
          {{ if eq $len 1 }}
          {{ $author := index $authorList 0 }}
          <a href="{{ $author.url }}">{{ $author.name }}</a>
          {{ else }}
          {{ range $i, $temp := $authorList }}{{ if eq (add $i 1) $len }} and {{ else if eq $i 0 }}{{ else }}, {{ end }}{{ $author := index $authorList $i }}{{ if $author.url }}<a href='{{ $author.url }}'>{{ $author.name }}</a>{{ else }}{{ $author.name }}{{ end }}{{ end }}
          {{ end }}
        </p>
      </div>
      {{ end }}
    </header>

    <div class="article-table">

      <aside class="aside-article">

        {{ $tags := .Site.Taxonomies.tags }}
        {{ $tagList := .Params.tags }}
        {{ if $tagList }}
        <section>
          <ul class="links tags">
            {{ range .Params.tags }}
            {{ $tag := index $tags . }}
            <li><a href="{{ $tag.Page.Permalink }}" class="badge badge-{{ . }}">{{ . }}</a></li>
            {{ end }}
          </ul>
        </section>
        {{ end }}

        <section class="metadata">
          <ul class="table">

            {{ if .Params.date }}
            <li class="metadata-item">
              <div class="icon metadata-icon icon-published-date"></div>
              <span class="screen-reader">Published on </span>
              <time class="metadata-title" datetime="{{ .Date }}">
                {{ .Date.Format "Jan 2, 2006" }}
              </time>
            </li>
            {{ end }}

            {{ if not .Params.hidden }}
            <li class="metadata-item">
              <div class="icon metadata-icon icon-reading-time"></div>
              <span class="screen-reader">Reading time: </span>
              <span class="metadata-title">
                {{ .ReadingTime }} min read
              </span>
            </li>
            {{ end }}

            {{ $discussionList := .Params.discussions }}
            {{ if $discussionList }}
            <li class="metadata-item">
              <div class="icon metadata-icon icon-discussion"></div>
              <span class="screen-reader">Article discussions: </span>
              <span class="metadata-title">
              {{ $len := (len $discussionList) }}
              {{ if eq $len 1 }}
              {{ $discussion := index $discussionList 0 }}
              Discuss on <a href="{{ $discussion.url }}">{{ $discussion.name }}</a>
              {{ else }}
              Discuss on {{ range $i, $temp := $discussionList }}{{ if eq (add $i 1) $len }} and {{ else if eq $i 0 }}{{ else }}, {{ end }}{{ $discussion := index $discussionList $i }}{{ if $discussion.url }}<a href='{{ $discussion.url }}'>{{ $discussion.name }}</a>{{ else }}{{ $discussion.name }}{{ end }}{{ end }}
              {{ end }}
              </span>
            </li>
            {{ end }}

            {{ $mirrorList := .Params.mirrors }}
            {{ if $mirrorList }}
            <li class="metadata-item">
              <div class="icon metadata-icon icon-mirror"></div>
              <span class="screen-reader">Article mirrors: </span>
              <span class="metadata-title">
              {{ $len := (len $mirrorList) }}
              {{ if eq $len 1 }}
              {{ $mirror := index $mirrorList 0 }}
              Also on <a href="{{ $mirror.url }}">{{ $mirror.name }}</a>
              {{ else }}
              Also on {{ range $i, $temp := $mirrorList }}{{ if eq (add $i 1) $len }} and {{ else if eq $i 0 }}{{ else }}, {{ end }}{{ $mirror := index $mirrorList $i }}{{ if $mirror.url }}<a href='{{ $mirror.url }}'>{{ $mirror.name }}</a>{{ else }}{{ $mirror.name }}{{ end }}{{ end }}
              {{ end }}
              </span>
            </li>
            {{ end }}

            {{ $knList := .Params.knowledge }}
            {{ with $knList }}
            <li class="metadata-item">
              <span>
                Recommended knowledge:
                {{ $len := (len $knList) }}
                {{ if eq $len 1 }}
                {{ $kn := index $knList 0 }}
                {{ $kn }}
                {{ else }}
                {{ range $i, $temp := $knList }}{{ if eq (add $i 1) $len }} and {{ else if eq $i 0 }}{{ else }}, {{ end }}{{ $kn := index $knList $i }}{{ $kn }}{{ end }}
                {{ end }}
              </span>
            </li>
            {{ end }}

          </ul>
        </section>

        {{ $linkList := .Params.links }}
        {{ if $linkList }}
        <section>
          <ul class="links metadata-links">
            {{ range $i, $temp := $linkList }}
            {{ $link := index $linkList $i }}
            {{ if $link.url }}
            <li class="metadata-link">
              <a href="{{ $link.url }}">
                {{ with $link.icon }}
                <div class="icon metadata-icon icon-{{ $link.icon }}"></div>
                <span class="screen-reader">{{ $link.icon }}: </span>
                {{ end }}
                <span class="metadata-title">
                  {{ $link.name }}
                </span>
              </a>
            </li>
            {{ else }}
            <li>
              {{ $link.name }}
            </li>
            {{ end }}
            {{ end }}
          </ul>
        </section>
        {{ end }}

      </aside>

      <main class="card card-article">
        <section class="content">
          {{ if .Params.deprecated }}
          <div class="mlt deprecated-warning">
            <h4 class="mlt-header">WARNING</h4>
            <h6 class="list-title">
              This post may be outdated or no longer accurate.
            </h6>
          </div>
          {{ end }}
          {{ if .Params.prologue }}
          <div class="prologue">{{ .Params.prologue | markdownify }}</div>
          {{ end }}

          {{ .Content }}
        </section>
      </main>

    </div>

  </article>

  {{ $current := . }}
  {{ $series := .Site.Taxonomies.series }}
  {{ $seriesList := .Params.series }}

  {{ if $seriesList }}
  <div class="mlt-container">
  {{ range $seriesList }}
  {{ $it := . }}
  {{ $s := index $series $it }}
  {{ $pages := $s.Pages.ByDate }}
  {{ range $i, $v := $pages }}
  {{ if eq $current.File $v.File }}
  <h4 class="mlt-header">Part of the <a href="{{ $s.Page.Permalink }}">{{ $s.Page.Title }}</a> collection</h4>
  <div class="mlt-table">

    {{ if ne $i 0 }}
    {{ range first 1 (after (sub (len $pages) $i) $pages.Reverse) }}
    <div class="mlt mlt-previous">
      <h6 class="mlt-header">Previous</h6>
      {{ partial "list-item.html" (dict "context" . "renderTechBadges" "false") }}
    </div>
    {{ end }}
    {{ end }}

    {{ if ne (len $pages) (add $i 1) }}
    {{ range first 1 (after (add $i 1) $pages) }}
    <div class="mlt mlt-next">
      <h6 class="mlt-header">Next</h6>
      {{ partial "list-item.html" (dict "context" . "renderTechBadges" "false") }}
    </div>
    {{ end }}
    {{ end }}

  </div>
  {{ end }}
  {{ end }}

  {{ end }}
  </div>
  {{ end }}

</main>

{{ partial "footer.html" . }}
